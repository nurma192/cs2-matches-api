# CS2 Matches API

Это проект-мок (Mock API) для имитации матча в CS2, реализованный на Node.js с использованием Express и Socket.io для работы в реальном времени.

## Требования

- Node.js (рекомендуется версия 14 или выше)
- npm

## Клонирование репозитория и установка зависимостей

1. **Клонируйте репозиторий:**

   ```bash
   git clone https://github.com/yourusername/cs2-matches-api.git
   ```
2. Перейдите в директорию проекта:
   ```bash
   cd cs2-matches-api
   ```
3. Установите зависимости:

   ```bash
   npm install
   ```
4. Запуск сервера
   ```bash
   npm start
   ```

По умолчанию сервер запускается на порту **4000**.

После запуска вы сможете обращаться к API по адресу: **http://localhost:4000**.

## API Эндпоинты
1. Создание нового матча

   ```bash
     URL: /matches
     Метод: POST
   ```

2. Тело запроса: JSON-объект с полями:
   ```
   mapId (number) – ID карты.
   team1 – объект с полями:{
      name (string) – название команды
      players (string[]) – список имён игроков команды
   }
   team2 – объект с полями:{
      name (string) – название команды
      players (string[]) – список имён игроков команды
   }
   teamPlayersCount (number) – количество игроков в каждой команде.
   ```

   ```javascript
   export interface CreateMatchParams {
       mapId: number;
       team1: {
           name: string;
           players: string[];
       }
       team2: {
           name: string;
           players: string[];
       }
       teamPlayersCount: number;
   }
   ```

3. Получение всех активных матчей
   ```
   URL: /matches
   Метод: GET
   ```
4. Получение завершённых матчей
   ```
   URL: /matches/finished
   Метод: GET
   ```
4. Получение конкретного матча
   ```
   URL: /matches/:id
   Метод: GET
   ```
# Real-Time (Реальное время)
Сервер использует Socket.io для отправки обновлений по матчам в реальном времени. Клиенты могут подключаться к Socket.io-серверу по адресу **http://localhost:4000** и слушать следующие события:

**matchUpdate** – событие, отправляемое при каждом обновлении состояния матча.
**matchFinished** – событие, уведомляющее о завершении матча.

## Логика работы сервера
#### Симуляция матча:
Сервер имитирует убийства в каждом матче с определённой вероятностью. **Каждые 1–10 секунд** происходит вызов функции simulateKill, которая обновляет статистику матча, формирует события убийств (killFeed) и проверяет окончание раунда.

Окончание матча:
Матч завершается, если одна из команд набирает **13** побед или сыграно более **24** раундов. При завершении матч переносится в список завершённых матчей, а в объекте матча выставляется флаг finished.

### Статистика игроков:
**Каждый игрок имеет следующие поля:**

   ```
   kills
   deaths
   assists
   headshots
   ```
### Разработка
Для разработки используется **nodemon**, который автоматически перезагружает сервер при изменении файлов.